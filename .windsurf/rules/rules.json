[
  {
    "filename": "absolute-path-integrity.md",
    "content": "---\ntrigger: always_on\n---\n\n- All Redis keys that include file paths must use POSIX-style relative paths, calculated from the root app directory passed to the CLI. No absolute paths or OS-specific slashes may be present in the key."
  },
  {
    "filename": "allow-explicit-project-name.md",
    "content": "---\ntrigger: always_on\n---\n\n- The CLI must support an optional `--name` (alias: `--project-name`) argument that overrides the default project name inferred from the final path segment. When provided, this name must be used as the Redis key prefix."
  },
  {
    "filename": "async-modular-idiomatic-rust.md",
    "content": "---\ntrigger: always_on\n---\n\n- All Rust code must be written in an asynchronous, modular, and idiomatic style, adhering to best practices and the project's coding standards."
  },
  {
    "filename": "cli-behavior-locked.md",
    "content": "---\ntrigger: always_on\n---\n\n- All changes to CLI argument parsing must follow an explicit update to the roadmap. If a CLI subcommand expects positional arguments, it must be documented as such in README and code."
  },
  {
    "filename": "error-handling-and-logging.md",
    "content": "---\ntrigger: always_on\n---\n\n- All functions must handle errors gracefully and log them appropriately using the existing logging framework. No use of `unwrap()` or `expect()` outside of tests."
  },
  {
    "filename": "enforce-consistent-key-prefix.md",
    "content": "---\ntrigger: always_on\n---\n\n- Use a consistent Redis key prefix for all data. Derive from --name or project directory. Prevents cross-project contamination."
  },
  {
    "filename": "file-and-directory-hygiened.md",
    "content": "---\ntrigger: always_on\n---\n\n- Maintain a clean and organized file and directory structure. Remove unused files and ensure that all directories serve a clear purpose."
  },
  {
    "filename": "function-touch-tests.md",
    "content": "---\ntrigger: always_on\n---\n\n- Any edit inside a function body, signature, docstring, or even reordering must **trigger full test execution** for that functionâ€™s module.\n- No commits allowed unless all related tests pass.\n- If no test exists, halt execution and generate a skeleton test case before continuing.\n- Models may not bypass this with justification or \"small change\" excuses. No free passes."
  },
  {
    "filename": "git-useage.md",
    "content": "---\ntrigger: manual\n---\n\n- Use `git add` and `git commit` before and after each code revision with appropriate commit messages to maintain a clear history of changes."
  },
  {
    "filename": "handoff-procedure.md",
    "content": "---\ntrigger: always_on\n---\n\n- Before handing off to another model or user, ensure all code is committed, tests pass, documentation is up to date, and no stubs or TODOs remain."
  },
  {
    "filename": "isolate-project-state.md",
    "content": "---\ntrigger: always_on\n---\n\n- Indexing a new project must not overwrite or pollute Redis keys from a previously indexed project. Each project must be isolated by its key_prefix."
  },
  {
    "filename": "lock-file-scope.md",
    "content": "---\ntrigger: always_on\n---\n\n- Only modify one file per session unless explicitly told otherwise. Finish what you start. Prevents sprawling breakage and diff chaos."
  },
  {
    "filename": "logging-required-for-redis.md",
    "content": "---\ntrigger: always_on\n---\n\n- All Redis operations must include appropriate log entries using the existing logging framework. No writes, deletes, or queries should happen silently."
  },
  {
    "filename": "mandatory-testing.md",
    "content": "---\ntrigger: always_on\n---\n\n- Every function must include a matching unit test in the same or associated module. No exceptions. Tests must cover success and failure paths."
  },
  {
    "filename": "model-user-handoff.md",
    "content": "---\ntrigger: always_on\n---\n\n- Ensure a smooth handoff between models and users by maintaining clear documentation, passing tests, and a clean codebase."
  },
  {
    "filename": "no-creative-output.md",
    "content": "---\ntrigger: always_on\n---\n\n- The model must not invent output formats, change Redis schema layouts, alter key naming conventions, or introduce improvements unless explicitly authorized."
  },
  {
    "filename": "no-free-thinking.md",
    "content": "---\ntrigger: always_on\n---\n\n- Models must not re-architect, reword, or improve code, roadmaps, or docs unless explicitly instructed. Execute, don't create."
  },
  {
    "filename": "no-implicit-key-prefixes.md",
    "content": "---\ntrigger: always_on\n---\n\n- All Redis keys must use a prefix of the format `code:{project_name}` where `{project_name}` is derived from the basename of the root directory passed via the CLI."
  },
  {
    "filename": "no-silent-errors.md",
    "content": "---\ntrigger: always_on\n---\n\n- Any function returning a Result must propagate the error unless explicitly handled. All parsing failures, Redis errors, and IO errors must result in logs and an error path return."
  },
  {
    "filename": "no-stubs-no-todos-no-future-work.md",
    "content": "---\ntrigger: always_on\n---\n\n- Code must never contain `TODO`, `unimplemented!()`, or placeholder logic. All functionality must be complete or excluded intentionally."
  },
  {
    "filename": "output-verification.md",
    "content": "---\ntrigger: always_on\n---\n\n- Always verify that the output matches the required format and specifications. Any deviation is considered a bug."
  },
  {
    "filename": "require-test-after-each-edit.md",
    "content": "---\ntrigger: always_on\n---\n\n- Every function or logic block added, changed, or removed must be immediately followed by a passing test. No batching."
  },
  {
    "filename": "yaml-configuration-only.md",
    "content": "---\ntrigger: always_on\n---\n\n- All configuration must be loaded from `~/.indexer/config.yaml`. No use of `.env`, CLI flags, or alternative sources for config."
  }
]

